<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <meta
            name="description"
            content="Planificador que optimiza tus días de descanso en Colombia combinando festivos, fines de semana y vacaciones."
        />
        <link rel="icon" type="image/png" href="../assets/favicon.png" />
        <title>Optimizador de Vacaciones</title>

    </head>

    <body>
        <main class="main-container">
            <h1 class="title-text">Optimizador de Vacaciones</h1>
            <form id="vacForm">
                <label
                    >Días de vacaciones
                    <input type="number" id="vacDays" min="1" required
                /></label>
                <label>Inicio <input type="date" id="start" /></label>
                <label>Fin <input type="date" id="end" /></label>
                <button type="submit">Calcular</button>
            </form>
            <div id="results"></div>
        </main>

        <footer>
            <a class="footer__claps separator" id="claps" onclick="addLike()">
                0
                <img
                    src="../assets/like.png"
                    alt="cheering icon"
                    width="20px"
                    height="20px"
                />
            </a>
            <a
                class="footer__message separator"
                id="sm"
                href="https://www.sanetomore.com/"
            >
                <img
                    src="../assets/contact.png"
                    alt="contact icon"
                    width="20px"
                    height="20px"
                />
            </a>
            <a class="footer__message separator" id="bf" href="../index.html">
                <img
                    src="../assets/back.png"
                    alt="back icon"
                    width="18px"
                    height="18px"
                />
            </a>
            <a class="footer__list" id="fl" href="../all/index.html">
                <img
                    src="../assets/list.png"
                    alt="list icon"
                    width="20px"
                    height="20px"
                />
            </a>
        </footer>
    </body>
    <script defer>
    const today=new Date,sd=document.getElementById("start"),ed=document.getElementById("end");sd.value=today.toISOString().slice(0,10),ed.value=new Date(today.getFullYear(),11,31).toISOString().slice(0,10),document.getElementById("vacForm").addEventListener("submit",async e=>{e.preventDefault();let t=parseInt(document.getElementById("vacDays").value,10),n=new Date(sd.value),a=new Date(ed.value),s=[...Array(a.getFullYear()-n.getFullYear()+1),].map((e,t)=>n.getFullYear()+t),i=new Set;for(let r of s){let o=await fetch(`https://api.diafestivo.co/make?year=${r}`).then(e=>e.json()).catch(()=>[]);(o.holidays||o).forEach(e=>{let t=new Date(e.date);t>=n&&t<=a&&i.add(t.toISOString().slice(0,10))})}let c=e=>e.getDay()>4||i.has(e.toISOString().slice(0,10)),g=[];for(let h=new Date(n);h<=a;h.setDate(h.getDate()+1))g.push(new Date(h));let $=[];for(let _=0;_<g.length;_++){if(c(g[_]))continue;let m=0,u=_;for(;u<g.length&&m<t;)!c(g[u])&&m++,u++;if(m<t)break;let f=_,S=u-1;for(;f>0&&c(g[f-1]);)f--;for(;S<g.length-1&&c(g[S+1]);)S++;$.push({s:g[f],e:g[S],l:S-f+1})}$.sort((e,t)=>t.l-e.l||e.s-t.s);let y=document.getElementById("results");if(y.innerHTML="",$.length){let v=document.createElement("div");v.className="main-result";let I=$[0];if(v.textContent=`${I.s.toISOString().slice(0,10)} → ${I.e.toISOString().slice(0,10)} (${I.l} d\xedas)`,y.appendChild(v),$.length>1){let E=document.createElement("details"),w=document.createElement("summary");w.textContent="M\xe1s resultados",E.appendChild(w),$.slice(1,11).forEach(e=>{let t=document.createElement("div");t.textContent=`${e.s.toISOString().slice(0,10)} → ${e.e.toISOString().slice(0,10)} (${e.l} d\xedas)`,E.appendChild(t)}),y.appendChild(E)}}});const p='<img src="../assets/like.png" alt="cheering icon" width="20" height="20">',l="https://likes.diafestivo.co",d=document.getElementById("claps");function addLike(){let e=Number(d.innerText)+1;d.classList.add("jump"),setTimeout(()=>d.classList.remove("jump"),200),d.innerHTML=`${e} ${p}`,fetch(l,{method:"POST"})}fetch(l).then(e=>e.text()).then(e=>{d.innerHTML=`${e} ${p}`});
    </script>
    <style>
    #results,h1{font-weight:600;text-align:center}body,footer{background:#fff}button,footer{cursor:pointer;box-shadow:var(--shadow-elevation-low)}@font-face{font-family:Int;font-weight:700;src:url("../assets/fonts/Inter-Bold.ttf") format("truetype");font-display:swap}@font-face{font-family:Mont;src:url("../assets/fonts/Montserrat-Regular.ttf") format("truetype");font-weight:400;font-display:swap}@font-face{font-family:Mont;src:url("../assets/fonts/Montserrat-SemiBold.ttf") format("truetype");font-weight:600;font-display:swap}:root{--shadow-color:0deg 0% 0%;--shadow-elevation-low:1px 1px 1.1px hsl(var(--shadow-color) / 0.47),5px 5px 5.3px -5px hsl(var(--shadow-color) / 0.23);--brand:#1976d2}*,::after,::before{box-sizing:border-box}*{margin:0;padding:0}p{overflow-wrap:break-word}body{font-family:Int;color:#000;line-height:1.4}.main-container{min-height:100vh;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:2rem;font-family:Int;font-weight:700;gap:2rem}form,label{flex-direction:column;display:flex}#results,.loading,button,footer,h1,input,label{font-family:Mont}h1{font-size:1.8rem}form{gap:1rem;width:100%;max-width:480px}label{font-weight:600;font-size:.95rem;gap:.4rem}button,input{padding:.8rem 1rem;font-size:1rem;border:1px solid #000;border-radius:.5rem}button{background:var(--brand);color:#fff;font-weight:600;transition:opacity .2s}button:hover{opacity:.9}#results{font-size:1.1rem;display:flex;flex-direction:column;gap:.7rem}.main-result{font-size:1.6rem;font-weight:700;max-width:20ch}details summary{cursor:pointer;margin-top:.5rem}details div{margin-top:.4rem}.loading{width:100vw;height:100vh;font-size:1.5rem;font-weight:600;display:none;justify-content:center;align-items:center}footer{z-index:2;position:fixed;bottom:10px;right:10px;font-weight:800;font-size:1rem;border:1px solid #000;border-radius:1rem;padding:.3rem 1rem;display:flex;gap:1rem;min-height:40px;max-height:40px}footer a{text-decoration:none;color:#000}.footer__calendar,.footer__claps,.footer__list,.footer__message{display:flex;gap:.5rem;align-items:center;justify-content:center}.footer__calendar img,.footer__claps img,.footer__message img{width:20px}.separator{border-right:1px solid #000;padding-right:15px;height:10px;margin-top:9px}.title-text{font-weight:700;font-size:clamp(3rem, 5vw, 5rem)}@keyframes grow-shrink{0%,100%{transform:scale(1)}25%,75%{transform:scale(1.1)}50%{transform:scale(1.3)}}.jump{animation:.3s forwards grow-shrink}@media (max-width:768px){.main-container{margin-left:0;margin-top:1rem;margin-bottom:1rem}footer{padding:.9em 1rem;top:93dvh}.separator{border-right:1px solid #000;padding-right:15px;max-height:10px;margin-top:0}#results{margin-bottom:2rem}}@media (min-width:768px){.main-container{padding-top:7rem;padding-bottom:7rem}}
    </style>
</html>
